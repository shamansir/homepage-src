#+title: Восстановление пароля в клиенте Psi (Python)
#+publishDate: <2010-04-06T02:14>
#+tags: psi python
#+hugo_section: blog-ru
#+author: Антон Котенко

Часто требуется восстановить пароль от аккаунта в клиенте Psi. Для этого
можно использовать любой язык программирования, см.
[[http://blogmal.42.org/rev-eng/psi-password.story][статью]].

В случае выбора Python, надо (подставьте нужный номер в =/a<n>/= если у
вас несколько аккаунтов):

#+begin_example
$ xpath -e '/accounts/accounts/a0/jid' ~/.psi/profiles/default/accounts.xml
$ xpath -e '/accounts/accounts/a0/password' ~/.psi/profiles/default/accounts.xml
#+end_example

Найденное сопоставить и записать, например:
=user@jabber.server 000100020003007e=, затем набросать питоновый скрипт:

#+begin_example
$ vim ./psi-recover.py
#+end_example

Вот такой:

#+begin_src python

import sys
u,p=sys.argv[1:3]
print "".join([chr(ord(u[x]) ^ eval("0x%s"%(p[4*x:4*x + 4]))) for x in xrange(len(p)/4)])
#+end_src

И запустить с этими параметрами:

#+begin_example
$ python ./psi-recover.py user@jabber.server 000100020003007e
#+end_example

That's all
