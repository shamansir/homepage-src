---
title: "Просто, как сэндвич: Движок блога на JavaScript и XML"
author: Anton Kotenko
draft: false
---

<div class="ox-hugo-toc toc has-section-numbers">

<div class="heading">Table of Contents</div>

- <span class="section-num">1</span> [Картинка](#картинка)
- <span class="section-num">2</span> [Компоненты](#компоненты)
- <span class="section-num">3</span> [Рецепт](#рецепт)
- <span class="section-num">4</span> [Достоинства](#достоинства)
- <span class="section-num">5</span> [Недостатки](#недостатки)
- <span class="section-num">6</span> [Может потом](#может-потом)
- <span class="section-num">7</span> [Пример](#пример)
- <span class="section-num">8</span> [Исходный код](#исходный-код)

</div>
<!--endtoc-->

Предположим, вам внезапно понадобился личный блог. У вас есть какой-то хилый бесплатный хостинг, и потому что он хилый на нём нет ни PHP, ни возможности поставить туда какой-либо server-side вообще. Или хуже, у вас есть только аккаунт на Dropbox, и вот тут вдруг внезапно нужен блог.

А ещё, может быть, вы предпочитаете Markdown-синтаксис написанию тяжёлых постов в унылом HTML. Тем более Markdown уже много где поддерживается (ну, исключая хабр). Тут было бы кстати хранить посты в отдельных файлах, чтобы взять и скопировать отдельный пост в Tumblr или ещё куда. И ещё это даёт возможность хранить файлы в каком-нибудь репозитории и даже устроить себе версионирование статей (если очень надо).

А ещё, хотелось бы иметь две версии блога в одной входной точке. Например, русскую и английскую.

Думаю, вы понимаете, к чему я веду: у меня есть что на всё это предложить. Надо было бы уже вставить не одну ссылку, но я совсем сволочь и поставлю одну в конце поста.


## <span class="section-num">1</span> Картинка {#картинка}

{{< figure src="%7B%7B%20get_figure(slug,%20'screenshot-small.png')%20%7D%7D" caption="<span class=\"figure-number\">Figure 1: </span>Screenshot" >}}


## <span class="section-num">2</span> Компоненты {#компоненты}

-   [JQuery](http://jquery.com), вместо хлеба
-   [Showdown](http://www.attacklab.net/showdown/), вместо колбасы
-   И парсер дат заместо горчицы

Чтобы не сильно париться, я взял [JQuery](http://jquery.com) (я использую из него только операции над DOM-ом и асинхронную загрузку XML-файлов, так что при лютой необходимости его можно аккуратно выковырнуть). Потом я взял [Showdown](http://www.attacklab.net/showdown/), это парсер синтаксиса Markdown переведённый в JavaScript. Потом взял какой-то сторонний парсер дат (это чтобы красиво эти даты отображать). И всё это смешал в одно целое, вот таким образом и получился маленький JS/XML-driven движок блога. Простой как сэндвич.


## <span class="section-num">3</span> Рецепт {#рецепт}

Для создания первого поста в блоге, скачайте [этот пакет](http://code.google.com/p/showdown-blog/downloads/detail?name=swblog.zip), распакуйте. Отредактируйте настройки (`prefs.xml`), создайте какой-нибудь пост, (`posts/<post-id>.xml`), добавьте `<post-id>` в `posts.xml`. Всё, готово, пост опубликован. Для следующих постов повторяйте только последние два шага. (По адресу `./create.html` вы найдёте редактор, выдранный из Showdown, он поможет вашей фантазии представлять, что получится из Markdown-синтаксиса).

Итак, ещё раз.

1.  Настроить через `prefs.xml`
2.  Положить `some-post.xml` в каталог `posts`
3.  Добавить `some-post` в `posts.xml`
4.  Повторять шаги 2 и 3 для следующих постов


## <span class="section-num">4</span> Достоинства {#достоинства}

-   Минимализм
-   Никакой серверной стороны. Вообще.
-   Посты написаны синтаксисом Markdown
-   Один пост - один файл XML
-   Конфигурация-через-XML
-   Стили-через-CSS
-   Тэги, облако тэгов и навигация по ним
-   Пермалинк на каждый пост
-   Поддерживает мобильные браузеры (парочку)
-   Можно делать несколько точек вхождения
-   В поставку включен скрипт для генерации RSS


## <span class="section-num">5</span> Недостатки {#недостатки}

-   Нет поддержки комментариев
-   Никакой индексации поисковиками
-   Только для браузеров с включенным JavaScript
-   Javascript и JQuery иногда долго работают на медленных сетях
-   Если не использовать `.htaccess`, надо указывать `index.html` явно
-   Есть что пооптимизировать


## <span class="section-num">6</span> Может потом {#может-потом}

-   Страницы
-   Поддержка шаблонов
-   Более приятный на вид RSS / Автоматизировать обновления RSS
-   Календарь


## <span class="section-num">7</span> Пример {#пример}

[Ссылка на пример](http://showdown-blog.googlecode.com/hg/index.html)


## <span class="section-num">8</span> Исходный код {#исходный-код}

[Проект на Googlecode](http://showdown-blog.googlecode.com/)

​**\* Upd. \*** Достоинства и недостатки со временем изменились, посетите страницу проекта чтобы узнать как именно.


This text is auto inserted at the end of the exported Markdown.
